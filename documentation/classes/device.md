<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

## Device

**Extends EventEmitter**

Class for panto interaction.

### Parameters

-   `port` **[string][1]** Port on that the device is connected.

### disconnect

Disconnect the device.

### poll

Pulls new data from serial connection and handles it.

### syncCallback

Replies to sync messages with an acknowledgement message.

### heartbeatCallback

Replies to heartbeat messages with an acknowledgement message.

### positionCallback

Handles position sent from the panto.

#### Parameters

-   `positions` **[Array][2]&lt;[Vector](vector.md)>** The positions sent by the panto.

### debugLogCallback

Logs debug message sent by the panto.

#### Parameters

-   `string` **[string][1]** The message sent by the panto.

### getMePosition

Gets the last known position of the me handle.

Returns **[Vector](vector.md)** Last known position as vector.

### getItPosition

Gets the last known position of the it handle.

Returns **[Vector](vector.md)** Last known position as vector.

### send

Enqueues a packet to be send via the serial connection to the
panto.

#### Parameters

-   `packet` **[object][3]** Specifying the package to be sent.
    -   `packet.messageType` **[number][4]** Type id of message.
    -   `packet.data` **[number][4]?** Containing the payload data, if needed.

### sendMotor

Enqueues a position packet to be send via the serial
connection to the panto.

#### Parameters

-   `controlMethod` **[number][4]** 0x00 Position, 0x01 Force rendering.
-   `pantoIndex` **[number][4]** Which panto should be moved.
-   `position` **[Vector](vector.md)** Position to move to.

### sendPID

Enqueues a PID tuning packet to be send
via the serial connection to the panto.

#### Parameters

-   `motorIndex` **[number][4]** Which motor should be tuned.
-   `p` **[number][4]** New p value.
-   `i` **[number][4]** New i value.
-   `d` **[number][4]** New d value.

### sendDumpHashtable

Debug: Request a dump of the physics' hashtable.

#### Parameters

-   `index` **[number][4]** Index of affected handle, with -1 meaning
    both. (optional, default `-1`)

### handleMoved

Sets new positions if handles are moved by ViDeb.

#### Parameters

-   `index` **[number][4]** Index of moved handle.
-   `position` **[Vector](vector.md)** Position the handle was moved to.

### moveHandleTo

Moves a Handle to a position.

#### Parameters

-   `index` **[number][4]** Index of handle to move.
-   `target` **[Vector](vector.md)** Position the handle should be moved to.

### applyForceTo

Applies force vector to the pantograph.

#### Parameters

-   `index` **[number][4]** Index of the handle to apply force to.
-   `force` **[Vector](vector.md)** Force vector to render.
    Third element will be ignored.

### rotateHandleTo

Rotates a Handle to target angle inside the global coordinate
system with zero beeing in postive x direction.
Positive rotation is counterclockwise.

#### Parameters

-   `index` **[number][4]** Index of handle to move.
-   `targetAngle` **[number][4]** Angle in radiant the handle should be
    rotated to.

Returns **[Promise][5]** The promise executing the rotation.

### movePantoTo

Returns a promise that invokes handle movement with tween
behaviour. Positive x goes to the right and positive y goes away from you.
The point (0,0) is between the motors.

#### Parameters

-   `index` **[number][4]** Index of handle to move.
-   `target` **[Vector](vector.md)** Position the handle should be moved to.
-   `speed` **[number][4]** Speed of the movement in mm per second
    (max value is 120). (optional, default `120`)
-   `interpolation_method` **[object][3]** Tween
    function that is used to generate the movement. (optional, default `TWEEN.Easing.Quadratic.InOut`)

Returns **[Promise][5]** The promise executing the movement.

### unblockHandle

Returns a promise that unblocks a handle.

#### Parameters

-   `index` **[number][4]** Index of handle to unblock.

Returns **[Promise][5]** The promise executing the unblock.

### unblock

Unblocks a handle.

#### Parameters

-   `index` **[number][4]** Index of handle to unblock.

### tweenPantoTo

Moves a handle with tween movement behaviour.

#### Parameters

-   `index` **[number][4]** Index of handle to move.
-   `target` **[Vector](vector.md)** Position the handle should be moved to.
-   `listener` **[PositionListener](positionListener.md)** Position listener for the target.
-   `duration` **[number][4]** Time in ms that the movement shall take. (optional, default `500`)
-   `interpolation_method` **[object][3]** Tween
    function that is used to generate the movement. (optional, default `TWEEN.Easing.Quadratic.InOut`)

### mapLine

Sends a line to the graphical debugger to be drawn.

#### Parameters

-   `line` **[Array][2]** An array containig two {Vectors}
    representing the two edge points of the line.
-   `color` **[string][1]** A html conform string to define a color.

### mapPoint

Sends a point to the graphical debugger to be drawn.

#### Parameters

-   `pos` **[Vector](vector.md)** The center position of the Point.
-   `size` **[number][4]** The diameter of the point.
-   `color` **[string][1]** A html conform string to define a color.

### addHapticObject

Adds an existing haptic object to the device
or adds a new haptic object if a vector is passed.
This also sets this device as the object's device.

#### Parameters

-   `input` **([HapticObject](hapticObject.md) | [Vector](vector.md))** The existing haptic object
    or the position for the new haptic object.

Returns **[HapticObject](hapticObject.md)** The added haptic object.

## animateTween

helper function for updating tween regularly

[1]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[2]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[3]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[4]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[5]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise
